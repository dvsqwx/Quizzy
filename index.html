<!doctype html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quizzy | Premium Web3</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

  <div id="canvas-container"></div>
  
  <div class="grid-overlay"></div>

  <main class="app-container">
    
    <nav class="navbar">
        <div class="brand">QUIZZY <span class="badge">PRO</span></div>
        <div class="nav-right">
             <button id="navStatsBtn" class="nav-link">Leaderboard</button>
             <div class="connection-status">
                 <span class="status-dot"></span> Connected
             </div>
        </div>
    </nav>

    <section id="screenMenu" class="screen active full-height-center">
        <div class="hero-content">
            <h1 class="main-title">UNLOCK <br> KNOWLEDGE</h1>
            <p class="subtitle">Next generation quiz interface for decentralized minds.</p>
            
            <div class="menu-actions">
                <button id="toSetupBtn" class="btn-primary big-btn">
                    Launch App <span class="arrow">→</span>
                </button>
                <button id="menuStatsBtn" class="btn-secondary big-btn">
                    Statistics
                </button>
            </div>
        </div>
    </section>

    <section id="screenSetup" class="screen modal-view">
        <div class="modal-card">
            <div class="modal-header">
                <h2>Configuration</h2>
                <button id="backToMenuBtn" class="close-btn">×</button>
            </div>
            
            <div class="setup-grid">
                <div class="setup-form">
                    <div class="input-group">
                        <label>Select Topic</label>
                        <select id="topic" class="custom-select">
                            <option value="js">JavaScript Core</option>
                            <option value="movies">Cinematography</option>
                        </select>
                    </div>

                    <div class="row-group">
                        <div class="input-group">
                            <label>Questions</label>
                            <select id="amount" class="custom-select">
                                <option value="5">5 Qs</option>
                                <option value="10" selected>10 Qs</option>
                                <option value="15">15 Qs</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Timer</label>
                            <select id="timeLimit" class="custom-select">
                                <option value="0">Off</option>
                                <option value="20" selected>20s</option>
                                <option value="30">30s</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Difficulty Mode</label>
                        <select id="mode" class="custom-select">
                            <option value="normal">Standard</option>
                            <option value="exam">Hardcore (-5s penalty)</option>
                            <option value="streak">Streak (+5s bonus)</option>
                        </select>
                    </div>

                    <select id="shuffle" style="display:none"><option value="yes">Yes</option></select>

                    <button id="startBtn" class="btn-primary full-width">
                        Start Session
                    </button>
                </div>

                <div class="setup-history">
                    <div class="history-header">
                        <span>Recent Logs</span>
                        <button id="clearHistoryBtn" class="text-btn">Clear</button>
                    </div>
                    <div id="history" class="history-list"></div>
                </div>
            </div>
        </div>
    </section>

    <section id="screenQuiz" class="screen modal-view">
        <div class="modal-card quiz-card">
            <div class="quiz-header">
                <div class="progress-container">
                    <div class="progress-info">
                        <span id="category" class="cat-badge">TOPIC</span>
                        <span id="progressText">01 / 10</span>
                    </div>
                    <div class="progress-bar-bg"><div id="progressFill" class="progress-bar-fill"></div></div>
                </div>
                <div id="timer" class="timer-circle">20</div>
            </div>

            <div class="quiz-body">
                <h2 id="question" class="question-text">Loading Data...</h2>
                <div id="hint" class="hint-text"></div>
                
                <div id="answers" class="answers-layout"></div>
            </div>

            <div class="quiz-footer">
                <button id="quitBtn" class="text-btn danger">Exit</button>
                <div class="quiz-controls">
                    <button id="skipBtn" class="btn-secondary small">Skip</button>
                    <button id="nextBtn" class="btn-primary small">Next</button>
                    <button id="finishBtn" class="btn-primary small hidden">Finish</button>
                    <button id="prevBtn" class="hidden" style="display:none"></button>
                </div>
            </div>
        </div>
    </section>

    <section id="screenResult" class="screen modal-view">
        <div class="modal-card result-card">
            <div class="result-header">
                <h2>Session Report</h2>
            </div>
            
            <div id="summary" class="summary-grid"></div>

            <div class="result-actions">
                <button id="restartBtn" class="btn-primary">Play Again</button>
                <button id="backBtn" class="btn-secondary">Main Menu</button>
                <button id="goStatsBtn" class="btn-ghost">Details</button>
            </div>

            <div class="details-collapse">
                <div id="stats" class="history-list"></div>
            </div>
        </div>
    </section>

    <section id="screenStats" class="screen modal-view">
        <div class="modal-card wide-card">
            <div class="modal-header">
                <h2>Global Statistics</h2>
                <button id="backFromStatsBtn" class="close-btn">×</button>
            </div>
            
            <div id="statsSummary" class="summary-grid"></div>
            
            <div class="stats-columns">
                <div class="col">
                    <h3>By Topic</h3>
                    <div id="statsByTopic" class="history-list"></div>
                </div>
                <div class="col">
                    <h3>History</h3>
                    <div id="statsLast" class="history-list"></div>
                </div>
            </div>
        </div>
    </section>

  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="3d-background.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', () => {
          const menu = document.getElementById('screenMenu');
          const setup = document.getElementById('screenSetup');
          const stats = document.getElementById('screenStats');
          
          document.getElementById('toSetupBtn').addEventListener('click', () => {
              menu.classList.remove('active');
              setTimeout(() => setup.classList.add('active'), 100); // Небольшая задержка для анимации
          });

          document.getElementById('backToMenuBtn').addEventListener('click', () => {
              setup.classList.remove('active');
              setTimeout(() => menu.classList.add('active'), 100);
          });
          
          const backBtn = document.getElementById('backBtn');
          const oldBackHandler = backBtn.onclick; 
          backBtn.addEventListener('click', (e) => {
              document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
              menu.classList.add('active');
          });

          const showStats = () => {
              document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
              stats.classList.add('active');
          };
          
          document.getElementById('navStatsBtn').addEventListener('click', showStats);
          document.getElementById('menuStatsBtn').addEventListener('click', showStats);

          document.getElementById('backFromStatsBtn').addEventListener('click', () => {
             stats.classList.remove('active');
             menu.classList.add('active');
          });
      });
  </script>
  <script type="module" src="./src/main.js"></script>
</body>
</html>
